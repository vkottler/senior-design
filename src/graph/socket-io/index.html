<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Socket IO Telemetry</title>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
        <script src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>
    </head>
    <body>
      	<h1 align="center">Quadcopter Telemetry Viewing</h1>
      <div id="chartContainer" style="height: 360px; width: 100%;"></div>
      <script>
      var data_accelx = [];
      var data_accely = []; 
      var data_accelz = []; 
   
      var chart = new CanvasJS.Chart("chartContainer", {
        zoomEnabled: true,
        title :{
          text: "Accelerometer v. Time"
        },
        axisY: {	
          title: "Accelerometer (m/s^2)",
          includeZero: true
        },
        axisX: {
          title:"Time (s)",
          includeZero: false
        },         
        data: [
          //accel x 
        {	
          type: "line",
          dataPoints: data_accelx,
          showInLegend: true,
          legendText: "Accel X", 
          color: "blue"
        },
        //accel y 
        {	
          type: "line",
          dataPoints: data_accely,
          showInLegend: true,
          legendText: "Accel X", 
          color: "green"
        },
        //accel z 
        {	
          type: "line",
          dataPoints: data_accelz,
          showInLegend: true,
          legendText: "Accel Z", 
          color: "red"
        }
        ]
      });
     
      $(function () {
          var socket = io();
          socket.on('dataLine', (data_set) =>
          {
            var incoming_x = data_set[0].x
            var incoming_y = data_set[0].y
            var incoming_z = data_set[0].z

            console.log("incoming data set -- ")
            console.log("incoming telem x: ",incoming_x);
            console.log("incoming telem y: ",incoming_y);
            console.log("incoming telem z: ",incoming_z);
            console.log("-------------------- ")

              data_accelx.push({
                x: incoming_x 
              });
              data_accely.push({
                x: incoming_y
              });
              data_accelz.push({
                x: incoming_z
              });
            
            chart.render();
          });
        });
  
        //console.log("the data points: ",data)

        </script> 
    </body>
</html>

